<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="view-transition" content="same-origin">
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="/logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Join St. John Paul II Vocational & High School. View our admission roadmap, requirements, and key application deadlines for 2026.">
    <title>Admissions | St. John Paul II Vocational & High School</title>
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="/src/style.css">
</head>

<body>
    <nav class="navbar scrolled"></nav>

    <main>
        <section class="page-hero" id="section-admissions_hero">
            <div class="container">
                <h1 data-field="title">Admissions</h1>
                <p data-field="subtitle">NURTURING TALENT & ACADEMIC BRILLIANCE</p>
                <img id="img-admissions_hero" style="display: none;" src="" alt="Hero Background">
            </div>
            <!-- Note: JS will handle setting background image on section if img src is present -->
        </section>

        <!-- Admission Process -->
        <section class="admission-process" style="padding: 100px 0;">
            <div class="container">
                <div class="section-title" style="text-align: center; margin-bottom: 60px;"
                    id="section-admissions_roadmap_intro">
                    <h4 data-field="subtitle"
                        style="color: var(--color-primary); font-weight: 700; text-transform: uppercase; letter-spacing: 2px; margin-bottom: 15px;">
                        The Roadmap</h4>
                    <h2 data-field="title">How to Join Us</h2>
                </div>

                <div class="process-timeline">
                    <div class="timeline-step">
                        <div class="step-number">1</div>
                        <h4>Application</h4>
                        <p style="color: var(--gray-600); font-size: 0.9rem;">Pick an application form from the school
                            or apply online.</p>
                    </div>
                    <div class="timeline-step">
                        <div class="step-number">2</div>
                        <h4>Interview</h4>
                        <p style="color: var(--gray-600); font-size: 0.9rem;">Shortlisted candidates are invited for an
                            interview or entry test.</p>
                    </div>
                    <div class="timeline-step">
                        <div class="step-number">3</div>
                        <h4>Admission</h4>
                        <p style="color: var(--gray-600); font-size: 0.9rem;">Successful applicants receive an admission
                            letter and fee structures.</p>
                    </div>
                    <div class="timeline-step">
                        <div class="step-number">4</div>
                        <h4>Registration</h4>
                        <p style="color: var(--gray-600); font-size: 0.9rem;">Pay initial fees and register to
                            officially join our community.</p>
                    </div>
                </div>

                <div class="admission-criteria"
                    style="margin-top: 80px; display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px;">
                    <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: var(--shadow-md);">
                        <h4 style="margin-bottom: 20px;"><i class="fas fa-user-clock"
                                style="color: var(--color-primary); margin-right: 10px;"></i> Age Requirements</h4>
                        <ul style="display: grid; gap: 10px; font-size: 0.95rem; color: var(--gray-600);">
                            <li><strong>O-Level (S.1):</strong> Minimum 11 years</li>
                            <li><strong>A-Level (S.5):</strong> Minimum 15 years</li>
                            <li><strong>Vocational:</strong> Minimum 14 years (flexible based on course)</li>
                        </ul>
                    </div>
                    <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: var(--shadow-md);">
                        <h4 style="margin-bottom: 20px;"><i class="fas fa-exchange-alt"
                                style="color: var(--color-primary); margin-right: 10px;"></i> Transfer Students</h4>
                        <p style="font-size: 0.95rem; color: var(--gray-600); line-height: 1.6;">Students transferring
                            from other schools must provide a valid <strong>Transfer Letter</strong> and all previous
                            academic transcripts. An assessment interview is mandatory.</p>
                    </div>
                    <div style="background: white; padding: 30px; border-radius: 12px; box-shadow: var(--shadow-md);">
                        <h4 style="margin-bottom: 20px;"><i class="fas fa-calendar-check"
                                style="color: var(--color-primary); margin-right: 10px;"></i> Key Deadlines</h4>
                        <ul style="display: grid; gap: 10px; font-size: 0.95rem; color: var(--gray-600);">
                            <li><strong>Term I Intake:</strong> Application by Jan 15th</li>
                            <li><strong>Term II Intake:</strong> Application by May 5th</li>
                            <li><strong>Short Courses:</strong> Rolling admissions (Monthly)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Requirements & Fees -->
        <section class="admission-details" style="padding: 100px 0; background: var(--gray-50);">
            <div class="container">
                <div class="grid-2-col">
                    <div class="req-card"
                        style="background: white; padding: 40px; border-radius: 20px; box-shadow: var(--shadow-xl);">
                        <h2 style="margin-bottom: 30px; display: flex; align-items: center; gap: 15px;">
                            <i class="fas fa-file-invoice" style="color: var(--color-primary);"></i> Requirements
                        </h2>
                        <ul style="display: grid; gap: 20px;">
                            <li
                                style="display: flex; gap: 15px; border-bottom: 1px solid var(--gray-100); padding-bottom: 15px;">
                                <i class="fas fa-check-circle"
                                    style="color: var(--color-primary); padding-top: 5px;"></i>
                                <span>Copy of Birth Certificate / National ID</span>
                            </li>
                            <li
                                style="display: flex; gap: 15px; border-bottom: 1px solid var(--gray-100); padding-bottom: 15px;">
                                <i class="fas fa-check-circle"
                                    style="color: var(--color-primary); padding-top: 5px;"></i>
                                <span>Previous School Reports / PLE/UCE Results Slip</span>
                            </li>
                            <li
                                style="display: flex; gap: 15px; border-bottom: 1px solid var(--gray-100); padding-bottom: 15px;">
                                <i class="fas fa-check-circle"
                                    style="color: var(--color-primary); padding-top: 5px;"></i>
                                <span>4 Passport Photos (White Background)</span>
                            </li>
                            <li style="display: flex; gap: 15px;">
                                <i class="fas fa-check-circle"
                                    style="color: var(--color-primary); padding-top: 5px;"></i>
                                <span>Completed Application Form</span>
                            </li>
                        </ul>
                    </div>

                    <div class="apply-form"
                        style="background: white; padding: 40px; border-radius: 20px; box-shadow: var(--shadow-xl);">
                        <h2 style="margin-bottom: 30px;">Online Inquiry</h2>
                        <form id="inquiryForm">
                            <div class="form-row"
                                style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                <div class="form-group">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Student's Full
                                        Name *</label>
                                    <input type="text" name="student_name" required placeholder="John Doe"
                                        style="width: 100%; padding: 12px; border: 1px solid var(--gray-300); border-radius: 8px;">
                                </div>
                                <div class="form-group">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Parent/Guardian
                                        Name</label>
                                    <input type="text" name="parent_name" placeholder="Jane Doe"
                                        style="width: 100%; padding: 12px; border: 1px solid var(--gray-300); border-radius: 8px;">
                                </div>
                            </div>
                            <div class="form-row"
                                style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                <div class="form-group">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Phone Number
                                        *</label>
                                    <input type="tel" name="phone" required placeholder="+256..."
                                        style="width: 100%; padding: 12px; border: 1px solid var(--gray-300); border-radius: 8px;">
                                </div>
                                <div class="form-group">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Email
                                        Address</label>
                                    <input type="email" name="email" placeholder="john@example.com"
                                        style="width: 100%; padding: 12px; border: 1px solid var(--gray-300); border-radius: 8px;">
                                </div>
                            </div>
                            <div class="form-row"
                                style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                <div class="form-group">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Preferred
                                        Course/Level</label>
                                    <select name="preferred_course" id="courseSelect"
                                        style="width: 100%; padding: 12px; border: 1px solid var(--gray-300); border-radius: 8px;">
                                        <optgroup label="Secondary School">
                                            <option value="O-Level (S.1-S.4)">O-Level (S.1-S.4)</option>
                                            <option value="A-Level (S.5-S.6)">A-Level (S.5-S.6)</option>
                                        </optgroup>
                                        <optgroup label="Vocational Courses">
                                            <option value="Building & Construction">Building & Construction</option>
                                            <option value="Tailoring & Fashion Design">Tailoring & Fashion Design
                                            </option>
                                            <option value="Motor Vehicle Mechanics">Motor Vehicle Mechanics</option>
                                            <option value="Electrical Installation">Electrical Installation</option>
                                            <option value="Plumbing">Plumbing</option>
                                            <option value="Welding & Metal Fabrication">Welding & Metal Fabrication
                                            </option>
                                            <option value="Catering & Hotel Management">Catering & Hotel Management
                                            </option>
                                            <option value="Hair Dressing & Cosmetology">Hair Dressing & Cosmetology
                                            </option>
                                            <option value="Carpentry & Joinery">Carpentry & Joinery</option>
                                            <option value="ICT / Computer Studies">ICT / Computer Studies</option>
                                            <option value="Agriculture">Agriculture</option>
                                            <option value="Secretarial Studies">Secretarial Studies</option>
                                        </optgroup>
                                        <option value="Other">Other (Specify Below)</option>
                                    </select>
                                </div>
                                <div class="form-group" id="otherCourseGroup" style="display: none;">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Specify
                                        Course</label>
                                    <input type="text" name="other_course" placeholder="Enter your preferred course"
                                        style="width: 100%; padding: 12px; border: 1px solid var(--gray-300); border-radius: 8px;">
                                </div>
                                <div class="form-group">
                                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">Current
                                        School</label>
                                    <input type="text" name="current_school" placeholder="Primary/Previous School"
                                        style="width: 100%; padding: 12px; border: 1px solid var(--gray-300); border-radius: 8px;">
                                </div>
                            </div>
                            <div class="form-group" style="margin-bottom: 30px;">
                                <label style="display: block; margin-bottom: 8px; font-weight: 600;">Message /
                                    Inquiry</label>
                                <textarea name="message"
                                    style="width: 100%; padding: 12px; border: 1px solid var(--gray-300); border-radius: 8px; height: 100px;"
                                    placeholder="Any questions or additional information..."></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary" style="width: 100%;">Submit Inquiry</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer"></footer>
    <script type="module" src="/src/main.js"></script>
    <script type="module">
        import { API_URL, getImageUrl } from '/src/config.js';

        document.addEventListener('DOMContentLoaded', () => {
            fetch(`${API_URL}/content/sections`)
                .then(res => res.json())
                .then(sections => {
                    sections.forEach(s => {
                        const el = document.getElementById(`section-${s.section_key}`);
                        if (el) {
                            const titleEl = el.querySelector('[data-field="title"]');
                            if (titleEl && s.title) titleEl.textContent = s.title;

                            const subtitleEl = el.querySelector('[data-field="subtitle"]');
                            if (subtitleEl && s.subtitle) subtitleEl.textContent = s.subtitle;

                            const contentEl = el.querySelector('[data-field="content"]');
                            if (contentEl && s.content) contentEl.innerHTML = s.content.replace(/\n/g, '<br>');

                            const btn = el.querySelector('[data-field="button"]');
                            if (btn && s.button_text) {
                                btn.textContent = s.button_text;
                                btn.href = s.button_link;
                            }

                            const img = document.getElementById(`img-${s.section_key}`);
                            if (img && s.image_url) {
                                img.src = getImageUrl(s.image_url);
                            }

                            // Hero/Section Background Logic
                            if (s.section_key.endsWith('_hero') && s.image_url) {
                                const bgUrl = getImageUrl(s.image_url);
                                el.style.background = `linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('${bgUrl}') center/cover`;
                            }
                        }
                    });
                })
                .catch(e => console.error(e));
        });

        // Show/hide "Other" course input
        document.getElementById('courseSelect').addEventListener('change', function () {
            const otherGroup = document.getElementById('otherCourseGroup');
            if (this.value === 'Other') {
                otherGroup.style.display = 'block';
            } else {
                otherGroup.style.display = 'none';
            }
        });

        // Form submission
        document.getElementById('inquiryForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData.entries());

            try {
                const res = await fetch(`${API_URL}/content/inquiries`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                if (res.ok) {
                    alert('Thank you! Your inquiry has been submitted. We will contact you soon.');
                    e.target.reset();
                    document.getElementById('otherCourseGroup').style.display = 'none';
                } else {
                    const err = await res.json();
                    alert('Error: ' + err.message);
                }
            } catch (err) {
                console.error(err);
                alert('Failed to submit inquiry. Please try again.');
            }
        });
    </script>
</body>

</html>